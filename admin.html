<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Admin - Experta Inmobiliaria</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
<style>
body{margin:0;padding:2rem;font-family:Arial,sans-serif;background:#f7f7f7;color:#000;}
form{max-width:600px;margin:auto;background:#e0e0e0;padding:2rem;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
input,textarea,select{width:100%;padding:.5rem;margin-bottom:1rem;border-radius:4px;border:1px solid #ccc;}
button{background:#555;color:white;border:none;padding:.7rem 1.5rem;border-radius:4px;cursor:pointer;}
button:hover{background:#333;}
</style>
</head>
<body>
<h2 style="text-align:center;">Panel Admin</h2>
<form id="adminForm">
<input type="text" name="titulo" placeholder="Título del inmueble" required>
<textarea name="descripcion" placeholder="Descripción" rows="3" required></textarea>
<input type="text" name="ubicacion" placeholder="Ubicación" required>
<input type="number" name="precio" placeholder="Precio (USD)" required>
<select name="tipo">
<option value="Venta">Venta</option>
<option value="Alquiler">Alquiler</option>
<option value="Anticrético">Anticrético</option>
</select>
<input type="file" name="fotos" accept="image/*" multiple required>
<button type="submit">Agregar Propiedad</button>
</form>

<script>
const form=document.getElementById('adminForm');
form.addEventListener('submit',e=>{
  e.preventDefault();
  const files=Array.from(form.fotos.files);
  if(files.length===0){alert('Selecciona al menos una imagen'); return;}
  const images=[];
  let loaded=0;
  files.forEach(file=>{
    const reader=new FileReader();
    reader.onload=event=>{
      images.push(event.target.result);
      loaded++;
      if(loaded===files.length){
        const pub={
          titulo:form.titulo.value,
          descripcion:form.descripcion.value,
          ubicacion:form.ubicacion.value,
          tipo:form.tipo.value,
          precio:form.precio.value,
          images:images
        };
        const data=JSON.parse(localStorage.getItem('publicaciones')||'[]');
        data.push(pub);
        localStorage.setItem('publicaciones',JSON.stringify(data));
        alert('Propiedad agregada. Ahora ve a la página principal.');
        form.reset();
      }
    };
    reader.readAsDataURL(file);
  });
});
</script>
</body>
</html>
